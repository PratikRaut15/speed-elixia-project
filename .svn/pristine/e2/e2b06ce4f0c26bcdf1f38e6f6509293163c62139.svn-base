function close_map(){jQuery(".filter").focus(function(){jQuery("#floatmap").hide(),jQuery(".iv_all").attr("src","../../images/show.png")})}function update_vehicle_status(){var e=jQuery("#sel_status").val();3==e||4==e?jQuery("#sel_stoppage").show():jQuery("#sel_stoppage").hide();var r="sel_status="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:r,cache:!1,success:function(e){}})}function update_vehicle_group(){var e=jQuery("#groupid").val(),r="groupid="+e;jQuery.ajax({type:"POST",url:"../../modules/realtimedata/rttabs.php",data:r,cache:!1,success:function(e){}})}function update_vehicle_status_onchange(){var e=jQUery("#statusid").val();3==e||4==e?jQuery("#sel_stoppage").show():jQuery("#sel_stoppage").hide();var r="statusid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:r,cache:!1,success:function(e){window.location.reload()}})}function update_stoppage_time(){var e=jQuery("#sel_stoppage").val(),r="sel_stoppage="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:r,cache:!1,success:function(e){}})}function add_fulecon(e,r,t,i){jQuery("#vehicleid").val(e),jQuery("#average").val(r),jQuery("#fuelcapacity").val(t),jQuery("#fuelbalance").val(i),jQuery("#fueltank").val(t);var a="vehicleid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:a,cache:!1,success:function(e){jQuery("#fuelpost").modal("show"),jQuery("#header-1").html("Add Fuel For Vehicle No.- "+e)}})}function add_driver(e,r,t){jQuery("#vehicle_driver_id").val(e),jQuery("#unitnodriver").val(r),jQuery("#driverid").val(t);var i="vehicleid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:i,cache:!1,success:function(e){jQuery("#Driver").modal("show"),jQuery("#header-4").html("Allocate Driver For Vehicle No.- "+e)}})}function messageToDriver(e,r,t){jQuery("#vehicle_id").val(e),jQuery("#driver_name").val(r),jQuery("#driver_no").val(t),jQuery("#MessageToDriver").modal("show"),jQuery("#header-6").html("Send Message To Driver.- "+r)}function sendMessage(){var e="Message:";e+=jQuery("#messageText").val();var r=jQuery("#driver_no").val(),t=r.match(/8888888888/g);if(null!=t||r.length<=10)jQuery("#drivermsgerr1").text("Please provide Mobile number!"),jQuery("#drivermsgerr1").show(),jQuery("#drivermsgerr1").fadeOut(4e3);else if(""==e)jQuery("#drivermsgerr1").text("Please Enter Message!"),jQuery("#drivermsgerr1").show(),jQuery("#drivermsgerr1").fadeOut(4e3);else{r=r.replace(" ","");var i=jQuery("#vehicle_id").val(),a="driverno="+r+"&driversms="+e+"&vehicleid1="+i;jQuery.ajax({type:"POST",url:"../../modules/realtimedata/rtd_ajax.php",data:a,cache:!1,success:function(e){2==e?(jQuery("#drivermsgerr1").text("Successfully Sent"),jQuery("#drivermsgerr1").show(),jQuery("#drivermsgerr1").fadeOut(8e3)):1==e?(jQuery("#drivermsgerr1").text("SMS sending FAILED to "+jQuery("#driver_name").val()),jQuery("#drivermsgerr1").show(),jQuery("#drivermsgerr1").fadeOut(8e3)):(jQuery("#drivermsgerr1").text("Unable to send SMS to "+jQuery("#driver_name").val()+" due to insufficient SMS balance."),jQuery("#drivermsgerr1").show(),jQuery("#drivermsgerr1").fadeOut(8e3))}})}}function click_buzzer(e,r){jQuery("#vehicle_id").val(e),jQuery("#unitno").val(r);var t="vehicleid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:t,cache:!1,success:function(e){jQuery("#Buzzer").modal("show"),jQuery("#header-2").html("Buzzer For Vehicle No.- "+e)}})}function click_buzzer1(e,r){jQuery("#vehicle_id").val(e),jQuery("#unitno").val(r);var t="vehicleid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:t,cache:!1,success:function(e){jQuery("#BuzzerNot").modal("show"),jQuery("#header-10").html("Buzzer For Vehicle No.- "+e)}})}function click_immobiliser(e,r,t,i){jQuery("#vehicle_id").val(e),jQuery("#unitno").val(r),jQuery("#statuscommand").val(i);var a="vehicleid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:a,cache:!1,success:function(e){jQuery("#Immobiliser").modal("show"),jQuery("#header-5").html("Immobilizer For Vehicle No.- "+e),0==t?(jQuery("#text-immobilise").html("Immobilizer Not Installed In Your Vehicle.<br/> * Note: For further information please contact an elixir."),jQuery("#save_mobiliser").hide(),jQuery("#no_mobiliser").hide(),jQuery("#ok_mobiliser").show()):(1==i?(jQuery("#lock").show(),jQuery("#start").hide(),jQuery("#text-immobilise").html("Would You Wish To Immobilize The Vehicle ?")):(jQuery("#start").show(),jQuery("#lock").hide(),jQuery("#text-immobilise").html("Would You Wish To Start The Vehicle ?")),jQuery("#save_mobiliser").show(),jQuery("#no_mobiliser").show(),jQuery("#ok_mobiliser").hide())}})}function click_unfreeze(e,r,t,i){jQuery("#vehicle_id").val(e),jQuery("#unitno").val(r);var a="vehicleid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:a,cache:!1,success:function(e){jQuery("#UNfreeze").modal("show"),jQuery("#header-12").html("Freeze For Vehicle No.- "+e)}})}function click_freeze(e,r,t,i){jQuery("#vehicle_id").val(e),jQuery("#unitno").val(r);var a="vehicleid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:a,cache:!1,success:function(e){jQuery("#freeze").modal("show"),jQuery("#header-13").html("Freeze For Vehicle No.- "+e)}})}function showfuelmodal(e){jQuery("#fuelpost").modal("show"),jQuery("#header-1").html("Add Fuel For")}function update_driver(){var e=jQuery("#customerno").val(),r=(jQuery("#unitnodriver").val(),jQuery("#userid").val()),t=jQuery("#vehicle_driver_id").val(),i=jQuery("#driverid").val(),a=jQuery("#vdriver").val(),l="vehicleid="+t+"&customerno="+e+"&userid="+r+"&driver="+a+"&driverid="+i+"&updatedriver=1";""==a||"0"==a?(jQuery("#drivererr").show(),jQuery("#drivererr").fadeOut(4e3)):(jQuery("#loader").show(),jQuery("#save").hide(),jQuery.ajax({type:"POST",url:"updatedriver.php",data:l,cache:!1,success:function(e){window.location.reload()}}))}function add_newdriver(){var e=jQuery("#customerno").val(),r=(jQuery("#unitnodriver").val(),jQuery("#userid").val()),t=jQuery("#vehicle_driver_id").val(),i=jQuery("#driverid").val(),a=jQuery("#dname").val(),l=jQuery("#dlic").val(),u=jQuery("#dphone").val(),o="vehicleid="+t+"&customerno="+e+"&userid="+r+"&dname="+a+"&dlic="+l+"&dphone="+u+"&driverid="+i+"&adddriver=1";""==a?(jQuery("#drivererr1").show(),jQuery("#drivererr1").fadeOut(4e3)):(jQuery("#loader").show(),jQuery("#save").hide(),jQuery.ajax({type:"POST",url:"updatedriver.php",data:o,cache:!1,dataType:"json",success:function(e){window.location.reload()}}))}function add_fuel(){var e=jQuery("#fuelstorrage").val(),r=jQuery("#average").val(),t=jQuery("#customerno").val(),i=jQuery("#userid").val(),a=jQuery("#vehicleid").val(),l=jQuery("#SDate").val(),u=jQuery("#STime").val(),o=jQuery("#fuelbalance").val(),c=jQuery("#fuelcapacity").val(),s=parseInt(o)+parseInt(e),d="vehicleid="+a+"&fuelstorrage="+e+"&customerno="+t+"&userid="+i+"&average="+r+"&sdate="+l+"&stime="+u+"&fueltank="+c,n=/^[0-9]{1,3}$/,h=/^[0-9]{1,3}$/,m=/^[0-9]{1,2}(\.[0-9]{1,2})$/,y=/^[0-9]{1,3}(\.[0-9]{1,2})$/;""==e?(jQuery("#fuelerr").show(),jQuery("#fuelerr").fadeOut(4e3)):e.match(y)||e.match(n)?""==r?(jQuery("#averageerr").show(),jQuery("#averageerr").fadeOut(4e3)):r.match(m)||r.match(n)?""==l?(jQuery("#dateerr").show(),jQuery("#dateerr").fadeOut(4e3)):""==u?(jQuery("#timeerr").show(),jQuery("#timeerr").fadeOut(4e3)):""==c?(jQuery("#tankerr").show(),jQuery("#tankerr").fadeOut(4e3)):c.match(h)?0==e||0==r||0==c?(jQuery("#ZeroError").show(),jQuery("#ZeroError").fadeOut(4e3)):s>c?(jQuery("#capasityerr").show(),jQuery("#capasityerr").fadeOut(4e3)):(jQuery("#loader").show(),jQuery("#save").hide(),jQuery.ajax({type:"POST",url:"addfuel.php",data:d,cache:!1,success:function(e){window.location.reload()}})):(jQuery("#tankerr1").show(),jQuery("#tankerr1").fadeOut(4e3)):(jQuery("#averageerr1").show(),jQuery("#averageerr1").fadeOut(4e3)):(jQuery("#fuelerr1").show(),jQuery("#fuelerr1").fadeOut(8e3))}function add_buzzer(){var e=jQuery("#unitno").val(),r=jQuery("#customerno").val(),t=jQuery("#userid").val(),i="userid="+t+"&unitno="+e+"&customerno="+r;jQuery("#loader").show(),jQuery("#save").hide(),jQuery.ajax({type:"POST",url:"add_buzzer.php",data:i,cache:!1,success:function(e){jQuery("#Buzzer").modal("hide")}})}function unfreezed_vehicle(){var e=jQuery("#unitno").val(),r=jQuery("#customerno").val(),t=jQuery("#userid").val(),i="userid="+t+"&unitno="+e+"&customerno="+r+"&action=unfreeze";jQuery("#loader").show(),jQuery("#save").hide(),jQuery.ajax({type:"POST",url:"freeze.php",data:i,cache:!1,success:function(e){jQuery("#UNfreeze").modal("hide"),location.reload()}})}function freeze_vehicle(){var e=jQuery("#unitno").val(),r=jQuery("#customerno").val(),t=jQuery("#userid").val(),i="userid="+t+"&unitno="+e+"&customerno="+r+"&action=freezed";jQuery("#loader").show(),jQuery("#save").hide(),jQuery.ajax({type:"POST",url:"freeze.php",data:i,cache:!1,success:function(e){jQuery("#UNfreeze").modal("hide"),location.reload()}})}function add_immobiliser(){var e=jQuery("#unitno").val(),r=jQuery("#customerno").val(),t=jQuery("#statuscommand").val(),i=jQuery("#userid").val(),a="userid="+i+"&unitno="+e+"&customerno="+r+"&status="+t;jQuery("#loader").show(),jQuery("#save").hide(),jQuery.ajax({type:"POST",url:"add_immobiliser.php",data:a,cache:!1,success:function(e){location.reload()}})}function vehiclehistory_leftdiv(e){$("#alerthistorydata").empty(),jQuery.ajax({type:"POST",url:"vehicle_histdata_ajax.php?vehicleid="+e,cache:!1,success:function(e){$("#alerthistorydata").html(e)}})}function call_row(e){if((0==previousid||previousid!=e)&&(0==previousid&&(previousid=e,jQuery("#iv_"+e).attr("src","../../images/show.png")),previousid!=e&&(jQuery(".iv_all").attr("src","../../images/show.png"),jQuery("#iv_"+e).attr("src","../../images/hide.gif"),periodic=!0)),previousid==e?(jQuery(".iv_all").attr("src","../../images/show.png"),jQuery("#iv_"+e).attr("src","../../images/hide.gif"),jQuery("#floatmap").remove()):toggle_counter%2!==0&&toggle_counter++,toggle_counter%2===0){jQuery("#floatmap").length&&jQuery("#floatmap").remove(),callid=e;var r=jQuery("#wwidth").val();75==r?jQuery("#"+e).after("<tr id='floatmap'><td colspan='100%'><div id='map_container'><div id=load></div><div id='alerthistorydata' style='height:330px; float:left; width:22%;'></div> <div id='map'  style='height:330px; float:left; width:55%;'></div><div class='pull-right' id='v_des' style='width:22%;height:330px;'></div></div></td></tr>").slideDown("slow"):jQuery("#"+e).after("<tr id='floatmap'><td colspan='100%' ><div id='map_container'><div id=load></div><div id='map' style='height:330px; float:left; width:100%;' ></div></div></td></tr>").slideDown("slow"),jQuery("#map_container").animate({duration:5e3,easing:"easeInSine"}).animate({height:330}),e&&jQuery.ajax({type:"POST",url:"rtd_ajax.php?vehicleid="+e,success:function(r){jQuery("#v_des").html(r);var t="#latlong"+e,i=jQuery(t).val(),a=jQuery("#vehicle"+e).val(),l=jQuery("#vehicleimage"+e).val(),u=i.split(","),o=new google.maps.LatLng(u[0],u[1]);jQuery.bind(r,refreshdata);var c=new google.maps.StyledMapType(styles,{name:"Styled Map"}),s={zoom:15,center:o,panControl:!0,streetViewControl:!1,mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"],zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},styles:styles};map=new google.maps.Map(document.getElementById("map"),s),map.mapTypes.set("map_style",c),map.setMapTypeId("map_style");var d=new google.maps.TrafficLayer;d.setMap(map),jQuery(".chk_latlong").each(function(){var e,r,t;t=jQuery(this).val();var i=t.split(","),a=i[2],l=i[3],u=new google.maps.LatLng(i[0],i[1]),o=new MarkerWithLabel({position:u,map:map,labelContent:l,labelAnchor:new google.maps.Point(45,50),labelClass:"mapslabels_chkp"});r=1e3*a,e=new google.maps.Circle({map:map,radius:r,fillColor:"#000000",strokeColor:"#000000",strokeweight:1}),e.bindTo("center",o,"position")});var n=new google.maps.MarkerImage(l,new google.maps.Size(48,48),new google.maps.Point(0,0),new google.maps.Point(8,20)),h=new MarkerWithLabel({position:o,map:map,icon:n,labelContent:a,labelAnchor:new google.maps.Point(9,45),labelClass:"mapslabels"});eviction_list.push(h),jQuery(".fence_latlong").each(function(){}),jQuery(".editbox").hide(),jQuery(".edit_chkname").dblclick(function(){var e=jQuery(this).attr("rel"),r=jQuery(this).attr("id");jQuery("#chkname_"+e+"_"+r).hide(),jQuery("#chkname_input_"+e+"_"+r).show(),jQuery("#chkname_input_"+e+"_"+r).focus(),jQuery("#chkrad_"+e+"_"+r).hide(),jQuery("#chkrad_input_"+e+"_"+r).show()}).change(function(){var e=jQuery(this).attr("rel"),r=jQuery(this).attr("id"),t=jQuery("#chkname_input_"+e+"_"+r).val(),i=jQuery("#chkrad_input_"+e+"_"+r).val(),a="chkid="+r+"&chkname="+t+"&chkrad="+i;jQuery("#chkname_"+e+"_"+r).html('<img src="load.gif" />'),jQuery("#chkrad_"+e+"_"+r).html('<img src="load.gif" />'),t&&i&&(t.length>0&&i.length>0?jQuery.ajax({type:"POST",url:"../checkpoint/route_ajax.php",data:a,cache:!1,success:function(a){jQuery("#chkname_"+e+"_"+r).html(t),jQuery("#chkrad_"+e+"_"+r).html(i),call_row_load(e)}}):alert("Enter something."))}),jQuery(".edit_fence").dblclick(function(){var e=jQuery(this).attr("rel"),r=jQuery(this).attr("id");jQuery("#fencename_"+e+"_"+r).hide(),jQuery("#fencename_input_"+e+"_"+r).show(),jQuery("#fencename_input_"+e+"_"+r).focus()}).change(function(){jQuery(".tipsy").each(function(){jQuery(this).hide()});var e=jQuery(this).attr("rel"),r=jQuery(this).attr("id"),t=jQuery("#fencename_input_"+e+"_"+r).val(),i="fenceid="+r+"&fencename="+t;jQuery("#fencename_"+e+"_"+r).html('<img src="load.gif" />'),t.length>0?jQuery.ajax({type:"POST",url:"../fencing/route_ajax.php",data:i,cache:!1,success:function(i){jQuery("#fencename_"+e+"_"+r).html(t),call_row_load(e)}}):alert("Enter something.")}),jQuery(".editbox").mouseup(function(){return!1}),jQuery(document).mouseup(function(){jQuery(".editbox").hide(),jQuery(".text").show()}),jQuery(".editbox").keypress(function(e){13==e.which&&(jQuery(".editbox").hide(),jQuery(".text").show(),jQuery(".tipsy").each(function(){jQuery(this).hide()}))});var m=jQuery("#capacity_"+e).val(),y=jQuery("#alert_"+e).val(),p=jQuery("#balance_"+e).val();draw_fuel_gauge(m,y,p,e),periodic=!0,globalid=e,periodicupdate()}}),jQuery("#load").animate({width:["toggle","swing"]},2e3,function(){});var t=jQuery("#latlong"+e).val();jQuery("#vehicle"+e).val();if(""!=t){t.split(",")}vehiclehistory_leftdiv(e),toggle_counter++}else periodic=!1,toggle_counter++,jQuery("#iv_"+e).attr("src","../../images/show.png");previousid=e,console.log(callid)}function periodicupdate(){1==periodic&&setTimeout(function(){refreshdata()},refreshtime)}function refreshdata(){1==periodic&&0!=globalid&&jQuery.ajax({type:"POST",url:"rtd_map_ajax.php",cache:!1,data:{vehicleids:globalid},success:function(e){var r=jQuery.parseJSON(e),t=r.result;evictmarkers(),jQuery.each(t,function(e,r){var t=new google.maps.MarkerImage(r.image,new google.maps.Size(48,48),new google.maps.Point(0,0),new google.maps.Point(8,20)),i=new google.maps.LatLng(r.cgeolat,r.cgeolong),a=new MarkerWithLabel({position:i,map:map,icon:t,labelContent:r.cname,labelAnchor:new google.maps.Point(9,45),labelClass:"mapslabels"});map.setCenter(i),eviction_list.push(a),jQuery("#map_table .ebcl_"+globalid).html(r.extbatt),jQuery("#map_table .ibcl_"+globalid).html(r.inbatt),jQuery("#map_table .gsmcl_"+globalid).attr("src",r.gsmimg),jQuery("#map_table .gsmcl_"+globalid).attr("title",r.network),jQuery("#"+globalid+" .imgcl").attr("src",r.idleimage),jQuery("#"+globalid+" .gimg").attr("src",r.iimage),jQuery("#"+globalid+" .speedcl").html(r.cspeed)}),periodicupdate()}})}function deletefence(e,r){var e=jQuery("#del_fence").val(),t=jQuery("#del_fence_vehid").val(),i="fenceid="+e+"&vehicleid="+t;jQuery.ajax({type:"POST",url:"../fencing/route_ajax.php",data:i,cache:!1,success:function(r){jQuery("#f_"+e).remove(),jQuery("#delete_fence").modal("hide"),call_row_load(t)}})}function deletechkpoint(e,r){var e=jQuery("#del_chkpoint").val(),t=jQuery("#del_chk_vehid").val(),i="chkid="+e+"&vehicleid="+t;jQuery.ajax({type:"POST",url:"../checkpoint/route_ajax.php",data:i,cache:!1,success:function(r){jQuery("#c_"+e).remove(),jQuery("#delete_chk").modal("hide"),call_row_load(t)}})}function deleteecode(e,r){var e=jQuery("#del_ecode").val(),t=jQuery("#del_ecode_vehid").val(),i="ecodeid="+e+"&vehicleid="+t;jQuery.ajax({type:"POST",url:"../ecode/route_ajax.php",data:i,cache:!1,success:function(r){jQuery("#e_"+e).remove(),jQuery("#delete_ecode1").modal("hide"),call_row_load(t)}})}function call_row_load(e){jQuery.ajax({type:"GET",url:"rtd_ajax.php?vehicleid="+e,async:!1,cache:!1,success:function(r){jQuery("#v_des").html(r);var t=jQuery("#latlong"+e).val(),i=jQuery("#vehicle"+e).val(),a=jQuery("#vehicleimage"+e).val(),l=t.split(","),u=new google.maps.LatLng(l[0],l[1]),o=new google.maps.StyledMapType(styles,{name:"Styled Map"}),c={zoom:15,center:u,panControl:!0,streetViewControl:!1,mapTypeIds:[google.maps.MapTypeId.ROADMAP,"map_style"],mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL},styles:styles};map=new google.maps.Map(document.getElementById("map"),c),map.mapTypes.set("map_style",o),map.setMapTypeId("map_style");var s=new google.maps.MarkerImage(a,new google.maps.Size(48,48),new google.maps.Point(0,0),new google.maps.Point(8,20));new google.maps.MarkerImage("http://elixiatech.com/speed/images/marker_icon.png"),new MarkerWithLabel({position:u,map:map,icon:s,labelContent:i,labelAnchor:new google.maps.Point(9,45),labelClass:"mapslabels"});jQuery(".chk_latlong").each(function(){var e,r,t;t=jQuery(this).val();var i=t.split(","),a=i[2],l=i[3],u=new google.maps.LatLng(i[0],i[1]),o=new MarkerWithLabel({position:u,map:map,labelContent:l,labelAnchor:new google.maps.Point(45,50),labelClass:"mapslabels_chkp"});r=1e3*a,e=new google.maps.Circle({map:map,radius:r,fillColor:"#AA0000",strokeColor:"#AA0000",strokeweight:1}),e.bindTo("center",o,"position")}),jQuery(".editbox").hide(),jQuery(".edit_chkname").dblclick(function(){var e=jQuery(this).attr("rel"),r=jQuery(this).attr("id");jQuery("#chkname_"+e+"_"+r).hide(),jQuery("#chkname_input_"+e+"_"+r).show(),jQuery("#chkrad_"+e+"_"+r).hide(),jQuery("#chkrad_input_"+e+"_"+r).show()}).change(function(){var e=jQuery(this).attr("rel"),r=jQuery(this).attr("id"),t=jQuery("#chkname_input_"+e+"_"+r).val(),i=jQuery("#chkrad_input_"+e+"_"+r).val(),a="chkid="+r+"&chkname="+t+"&chkrad="+i;jQuery("#chkname_"+e+"_"+r).html('<img src="load.gif" />'),jQuery("#chkrad_"+e+"_"+r).html('<img src="load.gif" />'),t&&i&&(t.length>0&&i.length>0?jQuery.ajax({type:"POST",url:"../checkpoint/route_ajax.php",data:a,cache:!1,success:function(a){jQuery("#chkname_"+e+"_"+r).html(t),jQuery("#chkrad_"+e+"_"+r).html(i),call_row_load(e)}}):alert("Enter something."))}),jQuery(".edit_fence").dblclick(function(){var e=jQuery(this).attr("rel"),r=jQuery(this).attr("id");jQuery("#fencename_"+e+"_"+r).hide(),jQuery("#fencename_input_"+e+"_"+r).show()}).change(function(){var e=jQuery(this).attr("rel"),r=jQuery(this).attr("id"),t=jQuery("#fencename_input_"+e+"_"+r).val(),i="fenceid="+r+"&fencename="+t;jQuery("#fencename_"+e+"_"+r).html('<img src="load.gif" />'),t.length>0?jQuery.ajax({type:"POST",url:"../fencing/route_ajax.php",data:i,cache:!1,success:function(i){jQuery("#fencename_"+e+"_"+r).html(t),call_row_load(e)}}):alert("Enter something.")}),jQuery(".editbox").mouseup(function(){return!1}),jQuery(document).mouseup(function(){jQuery(".editbox").hide(),jQuery(".text").show()}),jQuery(".editbox").keypress(function(e){13==e.which&&(jQuery(".editbox").hide(),jQuery(".text").show())})}}),jQuery("#load").animate({width:["toggle","swing"]},2e3,function(){});var r=jQuery("#latlong"+e).val();jQuery("#vehicle"+e).val(),r.split(",");toggle_counter++,previousid=e}function loadrefresh(){var e="";$("tr:not([filtermatch]) input[id^='latlong']").each(function(r){var t;t=$(this).attr("id").replace("latlong",""),e+=t+","}),e=e.slice(0,-1);var r=0,t=0;$("input[id^='search_table_filter']").each(function(){r++,""==$(this).val()&&t++});var i;i=r!=t?"rtd_map_ajax.php?all="+e:"rtd_map_ajax.php?all=1",jQuery.ajax({type:"POST",url:i,cache:!1,success:function(e){var r=jQuery.parseJSON(e),t=r.result;jQuery.each(t,function(e,r){"177"===r.customerno?(jQuery("#"+r.cvehicleid+" .imgcl").attr("src",r.idleimage),jQuery("#"+r.cvehicleid+" .lupd").html(r.clastupdated),jQuery("#"+r.cvehicleid+" .status").html(r.status),jQuery("#"+r.cvehicleid+" .gimg").val(r.iimage),jQuery("#"+r.cvehicleid+" .loccl").html('<a style="text-decoration:underline;">'+r.location+"</a>"),jQuery("#"+r.cvehicleid+" .speedcl").html(r.cspeed),jQuery("#"+r.cvehicleid+" .distcl").html(r.totaldist),jQuery("#"+r.cvehicleid+" .pccl").attr("src",r.pc),jQuery("#"+r.cvehicleid+" .pccl").attr("title",r.pctitle),jQuery("#"+r.cvehicleid+" .loadcl").html(r.msgkey),jQuery("#"+r.cvehicleid+" .accl").html(r.acsensor),jQuery("#"+r.cvehicleid+" .doorCl").html(r.doorsensor),jQuery("#"+r.cvehicleid+" .tempc1").html(r.temp1),jQuery("#"+r.cvehicleid+" .tempc2").html(r.temp2),jQuery("#"+r.cvehicleid+" .tempc3").html(r.temp3),jQuery("#"+r.cvehicleid+" .tempc4").html(r.temp4),jQuery("#overspeed_val").html(r.a),jQuery("#running_val").html(r.b),jQuery("#idle_ign_on").html(r.c),jQuery("#idle_ign_off").html(r.d),jQuery("#inactive_val").html(r.e),jQuery("#inactive").html(r.p),jQuery("#w_on").html(r.r),jQuery("#conflict").html(r.q),jQuery("#seconds").html("00")):"193"===r.customerno?(jQuery("#"+r.cvehicleid+" .imgcl").attr("src",r.idleimage),jQuery("#"+r.cvehicleid+" .lupd").html(r.clastupdated),jQuery("#"+r.cvehicleid+" .status").html(r.status),jQuery("#"+r.cvehicleid+" .gimg").val(r.iimage),jQuery("#"+r.cvehicleid+" .loccl").html('<a style="text-decoration:underline;">'+r.location+"</a>"),jQuery("#"+r.cvehicleid+" .speedcl").html(r.cspeed),jQuery("#"+r.cvehicleid+" .distcl").html(r.totaldist),jQuery("#"+r.cvehicleid+" .pccl").attr("src",r.pc),jQuery("#"+r.cvehicleid+" .pccl").attr("title",r.pctitle),jQuery("#"+r.cvehicleid+" .loadcl").html(r.msgkey),jQuery("#"+r.cvehicleid+" .accl").html(r.acsensor),jQuery("#"+r.cvehicleid+" .doorCl").html(r.doorsensor),"Temperature"===r.t1&&(1==r.temp1on?jQuery("#"+r.cvehicleid+" .temp1").html(r.temp1+" 0".sup()+"C"):jQuery("#"+r.cvehicleid+" .temp2").html(r.temp1)),"High Pressure"===r.t2&&(1==r.temp2on?jQuery("#"+r.cvehicleid+" .temp2").html(r.temp2+" PSI"):jQuery("#"+r.cvehicleid+" .temp2").html(r.temp2)),"Low Pressure"===r.t3&&(1==r.temp3on?jQuery("#"+r.cvehicleid+" .temp3").html(r.temp3+" PSI"):jQuery("#"+r.cvehicleid+" .temp3").html(r.temp3)),"Oil Pressure"===r.t4&&(1==r.temp4on?jQuery("#"+r.cvehicleid+" .temp4").html(r.temp4+" PSI"):jQuery("#"+r.cvehicleid+" .temp4").html(r.temp4)),4==r.temp_sensors&&(1==r.temp1on?jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp1+" 0".sup()+"C"):jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp1),1==r.temp2on?jQuery("#"+r.cvehicleid+" .tempc2").html(r.temp2+" 0".sup()+"C"):jQuery("#"+r.cvehicleid+" .tempc2").html(r.temp2),1==r.temp3on?jQuery("#"+r.cvehicleid+" .tempc3").html(r.temp3+" 0".sup()+"C"):jQuery("#"+r.cvehicleid+" .tempc3").html(r.temp3),1==r.temp4on?jQuery("#"+r.cvehicleid+" .tempc4").html(r.temp4+" 0".sup()+"C"):jQuery("#"+r.cvehicleid+" .tempc4").html(r.temp4)),jQuery("#overspeed_val").html(r.a),jQuery("#running_val").html(r.b),jQuery("#idle_ign_on").html(r.c),jQuery("#idle_ign_off").html(r.d),jQuery("#inactive_val").html(r.e),jQuery("#inactive").html(r.p),jQuery("#w_on").html(r.r),jQuery("#conflict").html(r.q),jQuery("#seconds").html("00")):(jQuery("#"+r.cvehicleid+" .imgcl").attr("src",r.idleimage),jQuery("#"+r.cvehicleid+" .lupd").html(r.clastupdated),jQuery("#"+r.cvehicleid+" .status").html(r.status),jQuery("#"+r.cvehicleid+" .gimg").val(r.iimage),jQuery("#"+r.cvehicleid+" .loccl").html('<a style="text-decoration:underline;">'+r.location+"</a>"),jQuery("#"+r.cvehicleid+" .speedcl").html(r.cspeed),""!=r.overspeedconf&&0!=r.cspeed&&jQuery("#"+r.cvehicleid+" .speedcl").addClass("off"),jQuery("#"+r.cvehicleid+" .distcl").html(r.totaldist),jQuery("#"+r.cvehicleid+" .pccl").attr("src",r.pc),jQuery("#"+r.cvehicleid+" .pccl").attr("title",r.pctitle),jQuery("#"+r.cvehicleid+" .loadcl").html(r.msgkey),jQuery("#"+r.cvehicleid+" .accl").html(r.acsensor),jQuery("#"+r.cvehicleid+" .doorCl").html(r.doorsensor),1==r.temp_sensors?1==r.tempon?(jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp),""!==r.tempconf1&&jQuery("#"+r.cvehicleid+" .tempcl").addClass("off")):jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp):2==r.temp_sensors?(1==r.temp1on?(jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp1),""!=r.tempconf1&&jQuery("#"+r.cvehicleid+" .tempcl").addClass("off")):jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp1),1==r.temp2on?(jQuery("#"+r.cvehicleid+" .tempc2").html(r.temp2),""!=r.tempconf2&&jQuery("#"+r.cvehicleid+" .tempc2").addClass("off")):jQuery("#"+r.cvehicleid+" .tempc2").html(r.temp2)):3==r.temp_sensors?(1==r.temp1on?(jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp1),""!=r.tempconf1&&jQuery("#"+r.cvehicleid+" .tempcl").addClass("off")):jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp1),1==r.temp2on?(jQuery("#"+r.cvehicleid+" .tempc2").html(r.temp2),""!=r.tempconf2&&jQuery("#"+r.cvehicleid+" .tempc2").addClass("off")):jQuery("#"+r.cvehicleid+" .tempc2").html(r.temp2),1==r.temp3on?(jQuery("#"+r.cvehicleid+" .tempc3").html(r.temp3),""!=r.tempconf3&&jQuery("#"+r.cvehicleid+" .tempc3").addClass("off")):jQuery("#"+r.cvehicleid+" .tempc3").html(r.temp3)):4==r.temp_sensors&&(1==r.temp1on?(jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp1),""!=r.tempconf1&&jQuery("#"+r.cvehicleid+" .tempcl").addClass("off")):jQuery("#"+r.cvehicleid+" .tempcl").html(r.temp1),1==r.temp2on?(jQuery("#"+r.cvehicleid+" .tempc2").html(r.temp2),""!=r.tempconf2&&jQuery("#"+r.cvehicleid+" .tempc2").addClass("off")):jQuery("#"+r.cvehicleid+" .tempc2").html(r.temp2),1==r.temp3on?(jQuery("#"+r.cvehicleid+" .tempc3").html(r.temp3),""!=r.tempconf3&&jQuery("#"+r.cvehicleid+" .tempc3").addClass("off")):jQuery("#"+r.cvehicleid+" .tempc3").html(r.temp3),1==r.temp4on?(jQuery("#"+r.cvehicleid+" .tempc4").html(r.temp4),""!=r.tempconf4&&jQuery("#"+r.cvehicleid+" .tempc4").addClass("off")):jQuery("#"+r.cvehicleid+" .tempc4").html(r.temp4)),1==r.use_humidity&&(1==r.humidityon?jQuery("#"+r.cvehicleid+" .humicl").html(r.humidity+"%"):(console.log(r.humidity),jQuery("#"+r.cvehicleid+" .humicl").html(r.humidity))),jQuery("#overspeed_val").html(r.a),jQuery("#running_val").html(r.b),jQuery("#idle_ign_on").html(r.c),jQuery("#idle_ign_off").html(r.d),jQuery("#inactive_val").html(r.e),jQuery("#inactive").html(r.p),jQuery("#w_on").html(r.r),jQuery("#conflict").html(r.q),jQuery("#seconds").html("00"))}),periodicupdateloadrefresh()}})}function periodicupdateloadrefresh(){timeouts.push(setTimeout(function(){loadrefresh()},periodictime)),timeouts.push(setTimeout(function(){hideIconCount=0,$(".iv_all").each(function(e){"../../images/hide.gif"===$(this).attr("src")&&hideIconCount++}),0!==callid&&hideIconCount>0&&(call_row(callid),refreshdata(),call_row(callid))},refreshtime))}function evictmarkers(){jQuery.each(eviction_list,function(e,r){r.setMap(null)}),eviction_list=[]}function draw_fuel_gauge(e,r,t,i){google.load("visualization","1.1",{packages:["corechart"]}),google.setOnLoadCallback(drawChart(e,r,t,i))}function drawChart(e,r,t,i){var a=google.visualization.arrayToDataTable([["Label","Value"],["Fuel  (in Lt)",parseFloat(t)]]),l={width:120,height:120,redFrom:0,redTo:r,minorTicks:10,max:e},u=new google.visualization.Gauge(document.getElementById("chart_fuel_"+i));u.draw(a,l)}function btnAddCheckPoint_click(){for(var e=0;e<timeouts.length;e++)clearTimeout(timeouts[e]);timeouts=[],addedcheckpoint()}function muteVehicle(e,r){jQuery("#vehicle_id").val(e),jQuery("#temp").val(r),jQuery("#condition").val("Mute");var t="vehicleid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:t,cache:!1,success:function(e){jQuery("#Mute").modal("show"),jQuery("#header-mute").html("Mute Temperature For Vehicle No.- "+e),jQuery("#alertmsg").html("Do You Like To Mute The Vehicle Temperature?"),jQuery("#notemsg").html("Note - This will help you not consider the values for temperature compliance.")}})}function unmuteVehicle(e,r){jQuery("#vehicle_id").val(e),jQuery("#temp").val(r),jQuery("#condition").val("Unmute");var t="vehicleid="+e;jQuery.ajax({type:"POST",url:"../../modules/user/route.php",data:t,cache:!1,success:function(e){jQuery("#Mute").modal("show"),jQuery("#header-mute").html("Unmute Temperature For Vehicle No.- "+e),jQuery("#alertmsg").html("Do You Like To Unmute The Vehicle Temperature?"),jQuery("#notemsg").html("Note - This will help you consider the values for temperature compliance.")}})}function updateVehicleMute(){var e=jQuery("#vehicle_id").val(),r=jQuery("#temp").val(),t=jQuery("#condition").val(),i=jQuery("#customerno").val(),a=jQuery("#userid").val(),l="vehcileid="+e+"&temp="+r+"&condition="+t+"&userid="+a+"&customerno="+i;jQuery("#loader").show(),jQuery("#save").hide(),jQuery.ajax({type:"POST",url:"muteVehicleTemp.php",data:l,cache:!1,success:function(e){jQuery("#Mute").modal("hide"),loadrefresh()}})}function routehistopen(e){window.open("../reports/reports.php?vehicleid="+e,"_blank")}function travelhistopen(e){window.open("../reports/reports.php?id=2&vehicleid="+e,"_blank")}function tempreport(e,r,t){window.open("../reports/reports.php?id=13&vehicleid="+e+"&tempsen="+r+"&devid="+t,"_blank")}function humreport(e,r){window.open("../reports/reports.php?id=48&vehicleid="+e+"&deviceid="+r,"_blank")}var toggle_counter=2,previousid=0,globalid=0,fuel_balance=0,eviction_list=[],periodic=!0,callid=0,timeouts=[],hideIconCount=0;if(267==customerrefreshfrq)var periodictime=9e3,refreshtime=1e4;else var periodictime=59e3,refreshtime=6e4;var styles=[{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{visibility:"simplified"},{lightness:46}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road.highway",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#9e9e9f"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#bfbfbf"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"#e0e0e0"}]},{featureType:"poi.park",stylers:[{lightness:38}]},{stylers:[{saturation:-54}]}];jQuery(document).ready(function(){periodicupdateloadrefresh(),jQuery(".helper").tipsy({gravity:"se"}),jQuery(".always_show").tipsy({gravity:"se"}),jQuery(".tooltip-top").tipsy({gravity:"se"}),jQuery(".tooltip-right").tipsy({gravity:"w"})}),$("#messageText").keyup(function(){$("#count").text($(this).val().length)}),jQuery("#addcheckpoint").live("hide",function(){loadrefresh()}),jQuery("#addfence").live("hide",function(){loadrefresh()}),jQuery("#getecode").live("hide",function(){loadrefresh()});